<!-- ia-translate: true -->
# Configuração Incorreta de Trigger do Defer

Este diagnóstico detecta triggers inacessíveis ou redundantes em blocos `@defer`.

```typescript

import {Component} from '@angular/core';

@Component({
  template: `
    @defer (on immediate; on timer(500ms)) {
      <large-component />
    }
  `
})
class MyComponent {}
```

## Qual é o problema?

O diagnóstico identifica vários padrões problemáticos na configuração de triggers do defer que levam a:

- **Código desnecessário** que nunca afeta o comportamento
- **Oportunidades de otimização perdidas** para melhor performance
- **Triggers de prefetch inacessíveis** que nunca serão executados

## Casos de aviso do diagnóstico

Este diagnóstico sinaliza os seguintes padrões problemáticos:

### `immediate` com triggers de prefetch

**Ruim — prefetch nunca é executado**

```typescript
@Component({
  template: `
    @defer (on immediate; prefetch on idle) {
      <my-cmp />
    }
  `
})
class MyComponent {}
```

**Bom — remova o prefetch redundante**

```typescript
@Component({
  template: `
    @defer (on immediate) {
      <my-cmp />
    }
  `
})
class MyComponent {}
```

### Timer de prefetch não é anterior ao timer principal

**Ruim — prefetch é posterior ao principal**

```typescript
@Component({
  template: `
    @defer (on timer(100ms); prefetch on timer(3000ms)) {
      <my-cmp />
    }
  `
})
class MyComponent {}
```

**Ruim — timing igual não oferece benefício**

```typescript
@Component({
  template: `
    @defer (on timer(500ms); prefetch on timer(500ms)) {
      <my-cmp />
    }
  `
})
class MyComponent {}
```

**Bom — prefetch dispara antes**

```typescript
@Component({
  template: `
    @defer (on timer(1000ms); prefetch on timer(500ms)) {
      <large-component />
    }
  `
})
class MyComponent {}
```

### Triggers de prefetch e principais idênticos

**Ruim — trigger de viewport idêntico**

```typescript
@Component({
  template: `
    @defer (on viewport; prefetch on viewport) {
      <my-cmp />
    }
  `
})
class MyComponent {}
```

**Ruim — alvo de interaction idêntico**

```typescript
@Component({
  template: `
    <button #loadBtn>Load</button>
    @defer (on interaction(loadBtn); prefetch on interaction(loadBtn)) {
      <large-component />
    }
  `
})
class MyComponent {}
```

**Bom — remova o prefetch redundante**

```typescript
@Component({
  template: `
    <button #loadBtn>Load</button>
    @defer (on interaction(loadBtn)) {
      <large-component />
    }
  `
})
class MyComponent {}
```

**Bom — use alvos diferentes para prefetch e principal**

```typescript
@Component({
  template: `
    <div #hoverArea>Hover to prefetch</div>
    <button #clickBtn>Click to load</button>
    @defer (on interaction(clickBtn); prefetch on hover(hoverArea)) {
      <large-component />
    }
  `
})
class MyComponent {}
```

## Requisitos de configuração

[`strictTemplates`](tools/cli/template-typecheck#strict-mode) deve estar habilitado para que qualquer diagnóstico estendido seja emitido.
`deferTriggerMisconfiguration` não tem requisitos adicionais além de `strictTemplates`.

## E se eu não puder evitar isso?

Este diagnóstico pode ser desabilitado editando o arquivo `tsconfig.json` do projeto:

```json
{
  "angularCompilerOptions": {
    "extendedDiagnostics": {
      "checks": {
        "deferTriggerMisconfiguration": "suppress"
      }
    }
  }
}
```

Veja [configuração de diagnósticos estendidos](extended-diagnostics#configuration) para mais informações.
